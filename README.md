# Audio Visualizer

A real-time audio visualization app that transforms sound into mesmerizing visuals. Built with the Web Audio API and HTML5 Canvas, it captures audio from your microphone or screen and renders reactive graphics at 60fps.

## Features

- **Four visualization modes**: Frequency Bars, Waveform, Flow Field, and Oscillatory Motion
- **Live audio input**: Microphone or system audio via screen share
- **Customizable parameters**: Each visualization has adjustable settings
- **Demo mode**: Runs with simulated audio when no input is connected

## Technical Implementation

### Audio Analysis

The audio pipeline uses the Web Audio API's `AnalyserNode` to extract frequency and time-domain data. Frequency data is split into bass, mid, and high bands with weighted averaging for responsive level metering. The level indicator uses **logarithmic scaling** (`log10`) to better match human perception of loudness.

### Frequency Bars

Uses **logarithmic frequency scaling** to map FFT bins to visual bars. Lower frequencies get more screen space since that's where most musical energy lives. Bar heights are smoothed with linear interpolation to prevent jitter.

### Waveform

Renders time-domain audio data using **Catmull-Rom spline interpolation** for smooth curves instead of jagged line segments. The algorithm generates control points between samples, creating natural-looking waveforms. A multi-pass glow effect layers blurred strokes beneath the main line.

### Flow Field

Particles follow a **curl noise vector field** generated by 3D Simplex noise. The curl operation ensures divergence-free flow (particles don't bunch up or spread out unnaturally). Three particle types exist:
- **Tracers**: Fast, short-lived, leave visible trails
- **Drifters**: Medium speed, moderate lifespan
- **Anchors**: Slow, long-lived, provide visual stability

Audio energy modulates field strength and particle spawn rates.

### Oscillatory Motion

Implements **Lissajous curves** where audio controls the frequency ratios. The formula uses a dual-oscillator system:

```
position = lerp(osc1, osc1 + 0.5 * osc2, energyBlend)
```

Bass drives amplitude, mids control frequency, and treble adjusts phase velocity. Beat detection triggers phase resets for rhythmic accents.

### Performance Optimizations

- **Half-resolution trail buffers**: Trail effects render at 50% resolution with bilinear upscaling
- **Lookup tables**: Pre-computed fade values stored in `Uint8Array` for fast trail decay
- **`willReadFrequently` flag**: Optimizes canvas contexts for repeated `getImageData` calls
- **Object pooling**: Particles are recycled instead of garbage collected

## Controls

| Key | Action |
|-----|--------|
| H | Toggle UI |
| G | Open gallery |
| S | Open settings |
| F | Fullscreen |
| Arrow keys | Switch visualizations |

## Stack

- React + TypeScript
- Vite
- Tailwind CSS
- Zustand (state management)
- Web Audio API
- HTML5 Canvas

---

MIT License
